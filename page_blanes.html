<!DOCTYPE html>
<html>
<head>
  <title>Blanes, Spain</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background: url('backgroundblanes.png') no-repeat center center fixed;
      background-size: cover;
      color: #003366; /* Dark blue text color */
      text-align: center;
      opacity: 0; /* Initial opacity for fade-in effect */
      transition: opacity 3s ease-in; /* Fade-in effect */
    }
    .content {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background: rgba(255, 255, 255, 0.8); /* White background with transparency */
      border-radius: 10px;
      color: #003366; /* Dark blue text color */
    }
    h1, h2, p {
      margin: 20px 0;
    }
    iframe {
      margin-top: 20px;
      border: none;
    }
    .story-button {
      display: inline-block;
      margin-top: 20px;
      padding: 10px 20px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      text-decoration: none;
      border-radius: 5px;
      font-size: 1.2em;
      cursor: pointer;
    }
    .story-button:hover {
      background: rgba(0, 0, 0, 0.9);
    }
    .back-button {
      display: inline-block;
      margin-top: 20px;
      padding: 10px 20px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      text-decoration: none;
      border-radius: 5px;
      font-size: 1.2em;
      cursor: pointer;
    }
    .back-button:hover {
      background: rgba(0, 0, 0, 0.9);
    }
    .popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255, 255, 255, 0.9);
      padding: 20px;
      border-radius: 10px;
      color: #003366; /* Dark blue text color */
      max-width: 600px;
      z-index: 1000;
      opacity: 0; /* Initial opacity for fade-in effect */
      transition: opacity 1s ease-in-out, transform 1s ease-in-out; /* Fade-in and pop-up effect */
    }
    .popup-content {
      margin-bottom: 20px;
    }
    .close-button {
      display: inline-block;
      padding: 10px 20px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      text-decoration: none;
      border-radius: 5px;
      font-size: 1.2em;
      cursor: pointer;
    }
    .close-button:hover {
      background: rgba(0, 0, 0, 0.9);
    }
    .music-controls {
      position: fixed;
      bottom: 20px;
      right: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
      background: rgba(0, 0, 0, 0.5);
      padding: 10px;
      border-radius: 10px;
    }
    .music-button {
      display: inline-block;
      padding: 10px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      text-decoration: none;
      border-radius: 50%;
      font-size: 1.2em;
      cursor: pointer;
    }
    .music-button:hover {
      background: rgba(0, 0, 0, 0.9);
    }
    .song-title {
      color: white;
      font-size: 1.2em;
    }
    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }
    .fade-out {
      animation: fadeOut 3s forwards;
    }
  </style>
</head>
<body>
  <div class="content">
    <iframe id="video" width="560" height="315" src="https://www.youtube.com/embed/your-video-id" frameborder="0" allowfullscreen></iframe>
    <h1>Blanes, Spain</h1>
    <p>
      Blanes is a popular tourist town on the Costa Brava of Spain. It's known for its beautiful beaches, historic gardens, and vibrant nightlife. The town offers a mix of natural beauty and cultural attractions, making it a perfect destination for visitors.
    </p>
    <h2>Local Recipe: Suquet de Peix</h2>
    "Fideuà", a seafood noodle dish similar to paella but made with short pasta noodles instead of rice. This dish is packed with the flavors of the sea and is perfect for a hearty meal.
    <p>
      <b>Ingredients:</b><br>
      Ingredients:
      - 400 g (14 oz) short, thin pasta noodles (fideus or vermicelli)
      - 500 g (1.1 lbs) mixed seafood (such as squid, cuttlefish, shrimp, and clams)
      - 1 large onion, finely chopped
      - 2 tomatoes, grated (or 1 cup canned crushed tomatoes)
      - 3 cloves garlic, minced
      - 1 red bell pepper, finely chopped
      - 1 green bell pepper, finely chopped
      - 1 liter (4 cups) fish stock
      - 1/2 cup white wine
      - 1/4 cup olive oil
      - 1 tsp paprika
      - A pinch of saffron threads (optional)
      - Salt and pepper to taste
      - Fresh parsley, chopped for garnish
      - Lemon wedges for serving<br>
      <br>
      <b>Instructions:</b><br>
      1. Prepare the Seafood:
      Clean and cut the squid or cuttlefish into rings or bite-sized pieces. Clean the shrimp and clams.
      2. Toast the Noodles:
      In a large paella pan or wide, shallow skillet, heat a little olive oil over medium heat.
      Add the pasta noodles and toast them until they are golden brown, stirring constantly to avoid burning. Remove the noodles and set them aside.
      3. Cook the Base:
      In the same pan, add the remaining olive oil and sauté the chopped onion until it becomes soft and translucent.
      Add the minced garlic and cook for another minute.
      Add the chopped bell peppers and cook until they soften.
      Stir in the grated tomatoes (or crushed tomatoes) and cook until the mixture thickens and reduces.
      4. Add the Seafood:
      Add the squid or cuttlefish to the pan and cook for a few minutes until they start to turn opaque.
      Pour in the white wine and let it simmer for a few minutes until the alcohol evaporates.
      5. Combine Ingredients:
      Add the toasted noodles back into the pan, mixing them well with the vegetables and seafood.
      Pour in the fish stock and add the paprika and saffron threads if using. Stir well to combine.
      6. Cook the Noodles:
      Bring the mixture to a simmer and let it cook until the noodles are tender and have absorbed most of the liquid, about 10-12 minutes.
      Add the shrimp and clams during the last few minutes of cooking. Cook until the shrimp are pink and the clams have opened. Discard any clams that do not open.
      7. Season and Serve:
      Season the fideuà with salt and pepper to taste.
      Garnish with chopped fresh parsley and serve with lemon wedges on the side.<br>
    </p>
    <div style="text-align: right;">
      <span class="story-button" onclick="openStory()">Read the Story</span>
    </div>
    <span class="back-button" onclick="goBackToMap()">Back to Map</span>
  </div>

  <!-- Story Pop-up -->
  <div class="popup" id="story-popup">
    <div class="popup-content">
      <h2>A Tale from Blanes</h2>
      <p>
        Blanes is steeped in legends and historical tales. One such story is about a hidden treasure said to be buried beneath the streets of the old town. According to the legend, during a time of war, a wealthy merchant hid his fortune to protect it from invading forces. He crafted an intricate map with clues, but he was captured and never returned. Over the centuries, many have tried to decipher the map and find the treasure, but it remains undiscovered, adding a sense of mystery and allure to the historic streets of Blanes.
      </p>
    </div>
    <span class="close-button" onclick="closeStory()">Close</span>
  </div>

  <!-- Audio element for background music -->
  <audio id="background-music" src="La Ciudad de Blanes.mp3" preload="auto" autoplay loop></audio>

  <!-- Music control buttons -->
  <div class="music-controls">
    <span class="music-button" onclick="playMusic()">&#9654;</span>
    <span class="music-button" onclick="pauseMusic()">&#10074;&#10074;</span>
    <span class="song-title">La Ciudad de Blanes</span>
  </div>

  <script>
    // Ensure music plays on this page
    const music = document.getElementById('background-music');
    music.volume = 0;
    music.play();
    const fadeAudioIn = setInterval(() => {
      if (music.volume < 1.0) {
        music.volume += 0.05;
      } else {
        clearInterval(fadeAudioIn);
      }
    }, 60); // fade in over 3 seconds (60ms * 50 = 3000ms)

    // Fade in the page content
    window.onload = () => {
      document.body.style.opacity = 1;
    };

    // Pause background music when video is played
    document.getElementById('video').addEventListener('play', function() {
      music.pause();
    });

    function openStory() {
      const storyPopup = document.getElementById('story-popup');
      storyPopup.style.display = 'block';
      setTimeout(() => {
        storyPopup.style.opacity = 1;
        storyPopup.style.transform = 'translate(-50%, -50%) scale(1)';
      }, 10);
    }

    function closeStory() {
      const storyPopup = document.getElementById('story-popup');
      storyPopup.style.opacity = 0;
      storyPopup.style.transform = 'translate(-50%, -50%) scale(0.9)';
      setTimeout(() => {
        storyPopup.style.display = 'none';
      }, 1000);
    }

    function playMusic() {
      music.play();
    }

    function pauseMusic() {
      music.pause();
    }

    function goBackToMap() {
      document.body.classList.add('fade-out');
      const fadeAudioOut = setInterval(() => {
        if (music.volume > 0.05) {
          music.volume -= 0.05;
        } else {
          clearInterval(fadeAudioOut);
          music.pause();
          window.location.href = 'map.html';
        }
      }, 60); // fade out over 3 seconds (60ms * 50 = 3000ms)
      setTimeout(() => {
        window.location.href = 'map.html';
      }, 3000); // ensure redirection happens after fade out
    }
  </script>
</body>
</html>
